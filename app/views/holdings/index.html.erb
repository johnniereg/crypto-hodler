<h1>Your current portfolio</h1>
<%= link_to 'Input New Holding', new_holding_path %>

<table>
    <tr>
        <th>Crypto</th>
        <th>Amount</th>
        <th>USD</th>
        <th>BTC</th>
    </tr>

    <% @holdings.each do |holding| %>
        <% api_string = 'https://api.coinmarketcap.com/v1/ticker/' + holding.crypto %>
        <% response = HTTParty.get(api_string) %>
        <% @usd_value = (holding.amount.to_f * response[0]["price_usd"].to_f) %>
        <% @btc_value = (holding.amount.to_f * response[0]["price_btc"].to_f) %>
        <tr>
            <td>
                <%= holding.crypto %>
            </td>
            <td>
                <%= holding.amount %>
            </td>
            <td>
                $ <%= @usd_value.round(2) %>
            </td>
            <td>
                à¸¿ <%= @btc_value.round(8) %>
            </td>
            <td><%= link_to 'Details', holding_path(holding) %></td>
            <td><%= link_to 'Update', edit_holding_path(holding) %></td>
            <td><%= link_to 'Delete', holding_path(holding), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
    <% end %>
</table>